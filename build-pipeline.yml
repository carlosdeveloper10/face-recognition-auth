steps:

- script: mvn test
  displayName: 'Run unit test'
   
- task: PublishTestResults@2
  displayName: 'Publish unit test result'
  inputs:
    testResultsFormat: 'JUnit'
    testResultsFiles: '**/*.xml'
    
- task: PublishCodeCoverageResults@1
  displayName: 'Publish coverage report' 
  inputs:
    codeCoverageTool: 'JaCoCo'
    summaryFileLocation: '$(System.DefaultWorkingDirectory)/target/site/jacoco/jacoco.xml'
    reportDirectory: '$(System.DefaultWorkingDirectory)/target/site/jacoco'
    additionalCodeCoverageFiles: '$(System.DefaultWorkingDirectory)/target/jacoco.exec'
    
steps:
- task: SonarSource.sonarqube.15B84CA1-B62F-4A2A-A403-89B77A063157.SonarQubePrepare@4
  displayName: 'Prepare analysis on SonarQube'
  inputs:
    SonarQube: 'sonar-qube'
    scannerMode: CLI
    configFile: sonar-project.properties
    